{"ast":null,"code":"var _jsxFileName = \"/Users/bipinsingh/Desktop/datewise/21-10-24/ICICI_395_GOLD_LOAN_DC_FRONTEND/src/pages/step-one/index.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport FooterComponents from '../../components/global-components/Footer';\nimport Header from '../../components/global-components/Header';\nimport { decrypt, decryptlink } from '../../util/crypto';\nimport { addEvents, getPrevData } from '../../service/goldloanServiceApi';\nimport { dateSeperated, getLanguageFromCode, maskAccountId, pageLoading } from '../../util/global';\nimport ErrorPage from '../errorPagedata';\nimport CallingPage from '../step-two/CallingPage';\nimport LandingPage from './LandingPage';\nimport { logStepMessage, sessionVariable } from '../../constants/variableConst';\nimport Content from '../../constants/Content.json';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Index = () => {\n  _s();\n  const [param, setParam] = useState({});\n  const [customerPrevDetails, setCustomerPrevDetails] = useState({});\n  const [pageShow, setPageShow] = useState(1);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const [modalMessageShow, setModalMessage] = useState(false);\n  const [language, setLanguage] = useState(\"English\");\n  useEffect(() => {\n    const parameters = window.location.href;\n    let new_parameters;\n    let new_refined = \"\";\n    let languageCode = \"\";\n    try {\n      const url = parameters.split(\"?\");\n      // url contains array of URL and hashcode\n      // extract proper hashlink from the url\n      if (url[1]) {\n        const cleaned_url = url[1].split(\"&\");\n        const details = cleaned_url[0];\n        const refined = details.replace(\"#/\", \"\");\n        new_refined = refined.replace(\"=\", \"\");\n        const hashCode = new_refined.split('_')[0];\n        const sessionId = new_refined.split('_')[1];\n        languageCode = new_refined.split('_')[2] || null;\n        setLanguage(getLanguageFromCode(languageCode));\n        new_refined = hashCode;\n        sessionStorage.setItem(sessionVariable.URL_HASH, hashCode);\n        sessionStorage.setItem(sessionVariable.SESSION_ID, sessionId);\n      }\n      new_parameters = decryptlink(new_refined);\n      // new_parameter contains customerid, batchno and spoctoid in pipe seperated.\n      if (new_refined !== undefined) {\n        let param = new_parameters.split(\"|\");\n        const paramData = {\n          \"spoctoId\": param[2],\n          \"batchNo\": param[1],\n          \"customerId\": param[0]\n        };\n        setParam(paramData);\n        // calling API to get Customer data from sp_leads table.\n        getPrevData(paramData).then(res => {\n          const resData = decrypt(res.data.data);\n          console.log(resData);\n          const maskedAccNo = maskAccountId(resData['gold_loan_acc_no']);\n          const expiryDateFormated = dateSeperated(resData['expiry_date']);\n          sessionStorage.setItem(\"mask\", maskedAccNo);\n          setCustomerPrevDetails({\n            \"maskLoanAccountNo\": maskedAccNo,\n            \"outstandingAmount\": resData['total_outstanding_amount'],\n            \"expiryDate\": expiryDateFormated,\n            \"name\": resData['name'],\n            \"mobile\": resData['mobile'],\n            \"email\": resData[\"email\"],\n            \"accountNo\": resData['gold_loan_acc_no'],\n            \"rmMobileNo\": resData['rm_mobile_no'],\n            \"videoFlag\": resData['videoFlag'],\n            \"imobileTagging\": resData['imobileTagging'],\n            \"branchAddressSolId\": resData['branchAddress']\n          });\n          pageLoading(false);\n          const logData = {\n            ...paramData,\n            step: logStepMessage.ONE.STEPID,\n            stepText: logStepMessage.ONE.STEPTEXT,\n            accountNo: maskedAccNo,\n            outstandingAmount: resData['total_outstanding_amount'],\n            expiryDate: resData['expiry_date'],\n            languageTag: Content[getLanguageFromCode(languageCode)].tag || \"\"\n          };\n          addEvents(logData);\n        }).catch(err => {\n          setPageShow(3);\n          setErrorMessage(\"some error occured\");\n        });\n      } else {\n        setPageShow(3);\n        setErrorMessage(\"Invalid URL\");\n      }\n    } catch (err) {\n      new_parameters = undefined;\n      setPageShow(3);\n      setErrorMessage(\"Invalid URL\");\n    }\n    // eslint-disable-next-line\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [pageShow === 1 && /*#__PURE__*/_jsxDEV(LandingPage, {\n        prevData: [param, customerPrevDetails, setPageShow, modalMessageShow, setModalMessage, setErrorMessage, language, setLanguage]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 28\n      }, this), pageShow === 2 && /*#__PURE__*/_jsxDEV(CallingPage, {\n        setPageShow: [setPageShow, param, setModalMessage]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 28\n      }, this), pageShow === 3 && /*#__PURE__*/_jsxDEV(ErrorPage, {\n        errorMessage: errorMessage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 28\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_s(Index, \"xfTSXdsT9Aq53UNrHq/SxxArqIQ=\");\n_c = Index;\nexport default Index;\nvar _c;\n$RefreshReg$(_c, \"Index\");","map":{"version":3,"names":["React","useEffect","useState","FooterComponents","Header","decrypt","decryptlink","addEvents","getPrevData","dateSeperated","getLanguageFromCode","maskAccountId","pageLoading","ErrorPage","CallingPage","LandingPage","logStepMessage","sessionVariable","Content","jsxDEV","_jsxDEV","Fragment","_Fragment","Index","_s","param","setParam","customerPrevDetails","setCustomerPrevDetails","pageShow","setPageShow","errorMessage","setErrorMessage","modalMessageShow","setModalMessage","language","setLanguage","parameters","window","location","href","new_parameters","new_refined","languageCode","url","split","cleaned_url","details","refined","replace","hashCode","sessionId","sessionStorage","setItem","URL_HASH","SESSION_ID","undefined","paramData","then","res","resData","data","console","log","maskedAccNo","expiryDateFormated","logData","step","ONE","STEPID","stepText","STEPTEXT","accountNo","outstandingAmount","expiryDate","languageTag","tag","catch","err","children","fileName","_jsxFileName","lineNumber","columnNumber","prevData","_c","$RefreshReg$"],"sources":["/Users/bipinsingh/Desktop/datewise/21-10-24/ICICI_395_GOLD_LOAN_DC_FRONTEND/src/pages/step-one/index.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport FooterComponents from '../../components/global-components/Footer';\nimport Header from '../../components/global-components/Header';\nimport { decrypt, decryptlink } from '../../util/crypto';\nimport { addEvents, getPrevData } from '../../service/goldloanServiceApi';\nimport { dateSeperated, getLanguageFromCode, maskAccountId, pageLoading } from '../../util/global';\nimport ErrorPage from '../errorPagedata';\nimport CallingPage from '../step-two/CallingPage';\nimport LandingPage from './LandingPage';\nimport { logStepMessage, sessionVariable } from '../../constants/variableConst';\nimport Content from '../../constants/Content.json'\n\nconst Index = () => {\n  const [param, setParam] = useState({});\n  const [customerPrevDetails, setCustomerPrevDetails] = useState({});\n  const [pageShow, setPageShow] = useState(1);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const [modalMessageShow, setModalMessage] = useState(false);\n  const [language, setLanguage] = useState(\"English\");\n\n  useEffect(() => {\n    const parameters = window.location.href;\n    let new_parameters;\n    let new_refined = \"\";\n    let languageCode = \"\";\n    try {\n      const url = parameters.split(\"?\");\n      // url contains array of URL and hashcode\n      // extract proper hashlink from the url\n      if (url[1]) {\n        const cleaned_url = url[1].split(\"&\");\n        const details = cleaned_url[0];\n        const refined = details.replace(\"#/\", \"\");\n        new_refined = refined.replace(\"=\", \"\");\n        const hashCode = new_refined.split('_')[0];\n        const sessionId = new_refined.split('_')[1];\n        languageCode = new_refined.split('_')[2] || null;\n        setLanguage(getLanguageFromCode(languageCode));\n        new_refined = hashCode;\n        sessionStorage.setItem(sessionVariable.URL_HASH, hashCode)\n        sessionStorage.setItem(sessionVariable.SESSION_ID, sessionId)\n      }\n      new_parameters = decryptlink(new_refined);\n      // new_parameter contains customerid, batchno and spoctoid in pipe seperated.\n      if (new_refined !== undefined) {\n        let param = new_parameters.split(\"|\");\n        const paramData = {\n          \"spoctoId\": param[2],\n          \"batchNo\": param[1],\n          \"customerId\": param[0]\n        };\n        setParam(paramData);\n        // calling API to get Customer data from sp_leads table.\n        getPrevData(paramData).then((res) => {\n          const resData = decrypt(res.data.data);\n          console.log(resData);\n          const maskedAccNo = maskAccountId(resData['gold_loan_acc_no']);\n          const expiryDateFormated = dateSeperated(resData['expiry_date']);\n          sessionStorage.setItem(\"mask\", maskedAccNo);\n          setCustomerPrevDetails({\n            \"maskLoanAccountNo\": maskedAccNo,\n            \"outstandingAmount\": resData['total_outstanding_amount'],\n            \"expiryDate\": expiryDateFormated,\n            \"name\": resData['name'],\n            \"mobile\": resData['mobile'],\n            \"email\": resData[\"email\"],\n            \"accountNo\": resData['gold_loan_acc_no'],\n            \"rmMobileNo\": resData['rm_mobile_no'],\n            \"videoFlag\": resData['videoFlag'],\n            \"imobileTagging\": resData['imobileTagging'],\n            \"branchAddressSolId\": resData['branchAddress']\n          })\n          pageLoading(false);\n          const logData = {\n            ...paramData,\n            step: logStepMessage.ONE.STEPID,\n            stepText: logStepMessage.ONE.STEPTEXT,\n            accountNo: maskedAccNo,\n            outstandingAmount: resData['total_outstanding_amount'],\n            expiryDate: resData['expiry_date'],\n            languageTag: Content[getLanguageFromCode(languageCode)].tag || \"\"\n          };\n          addEvents(logData);\n        }).catch((err) => {\n          setPageShow(3);\n          setErrorMessage(\"some error occured\");\n        })\n\n      } else {\n        setPageShow(3);\n        setErrorMessage(\"Invalid URL\");\n      }\n    } catch (err) {\n      new_parameters = undefined;\n      setPageShow(3);\n      setErrorMessage(\"Invalid URL\");\n    }\n    // eslint-disable-next-line\n  }, [])\n  return (\n    <>\n      <Header />\n      <div>\n      </div>\n      <div >\n        {pageShow === 1 && <LandingPage prevData={[param, customerPrevDetails, setPageShow, modalMessageShow, setModalMessage, setErrorMessage, language, setLanguage]} />}\n        {pageShow === 2 && <CallingPage setPageShow={[setPageShow, param, setModalMessage]} />}\n        {pageShow === 3 && <ErrorPage errorMessage={errorMessage} />}\n      </div>\n      {/* <FooterComponents language={language} /> */}\n    </>\n  );\n};\n\nexport default Index;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}